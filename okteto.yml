name: test-pipeline

#build:
#  context: .

#dependencies:
#  test:
#    repository: http://nonexistentrepo/okteto/test.git
#    wait: true

deploy:
  commands:
    - name: test variable scripting
      command: |
        HELLO_WORLD="hi!"
        echo $HELLO_WORLD
    - name: check okteto version
      command: okteto version
    - name: echo path
      command: echo $PATH
    - name: echo external variable
      command: echo $EXTERNAL_VARIABLE
    - name: echo base64 variable
      command: echo "${EXTERNAL_VARIABLE}" | base64

destroy:
  commands:
    - name: test variable scripting
      command: |
        ANOTHER_VAR="this is another variable"
        echo $ANOTHER_VAR
    - name: echo external variable
      command: echo $EXTERNAL_VARIABLE
    - name: echo base64 variable
      command: echo "${EXTERNAL_VARIABLE}" | base64
    
    #- name: fail
    #  command: non-existent-comment
